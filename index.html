<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全功能化学元素周期表 (118元素版)</title>
    <style>
        :root {
            --bg-color: #10141d; /* 深蓝黑背景 */
            --text-color: #ecf0f1;
            --card-bg: #1e2736;
            --modal-bg: rgba(16, 20, 29, 0.95);
            
            /* 细分颜色分类 (参考图2风格) */
            --c-alkali: #ff6b6b;       /* 碱金属 */
            --c-alkaline: #ff9f43;     /* 碱土金属 */
            --c-transition: #feca57;   /* 过渡金属 */
            --c-post-trans: #fab1a0;   /* 贫金属/后过渡 */
            --c-metalloid: #00d2d3;    /* 类金属 */
            --c-nonmetal: #54a0ff;     /* 非金属 */
            --c-halogen: #5f27cd;      /* 卤素 */
            --c-noble: #c8d6e5;        /* 稀有气体 */
            --c-lanthanoid: #ff9ff3;   /* 镧系 */
            --c-actinoid: #9c88ff;     /* 锕系 */
            --c-unknown: #576574;      /* 未知/其他 */
        }

        body {
            font-family: 'Segoe UI', 'PingFang SC', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 { margin-bottom: 10px; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        .subtitle { color: #7f8c8d; margin-bottom: 30px; font-size: 0.9em; }

        /* --- 控制栏 --- */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
            background: #18202b;
            padding: 15px 25px;
            border-radius: 50px;
            border: 1px solid #2c3e50;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        input, select {
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #34495e;
            background: #222f3e;
            color: white;
            font-size: 14px;
            outline: none;
        }
        input:focus { border-color: var(--c-nonmetal); }

        /* --- 周期表布局核心 --- */
        .table-container {
            max-width: 100%;
            overflow-x: auto;
            padding: 20px;
            /* 居中滚动条内容 */
            display: flex;
            justify-content: center; 
        }

        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, 60px); /* 18列 */
            grid-template-rows: repeat(10, 60px);    /* 7主行 + 间距 + 2副行 */
            gap: 6px;
            position: relative;
        }

        /* 元素卡片样式 */
        .element {
            background-color: #263042;
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            user-select: none;
            color: #eee;
        }

        .element:hover {
            transform: scale(1.2);
            z-index: 100;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            border: 1px solid #fff;
        }

        .element.dimmed { opacity: 0.15; filter: grayscale(0.8); pointer-events: none; }

        /* 元素内容 */
        .at-num { position: absolute; top: 4px; left: 4px; font-size: 9px; opacity: 0.7; }
        .symbol { font-size: 18px; font-weight: 700; margin-top: 4px; }
        .name { font-size: 10px; margin-top: 2px; opacity: 0.9; }

        /* 颜色分类定义 */
        .cat-alkali { background: rgba(255, 107, 107, 0.15); border-bottom: 3px solid var(--c-alkali); color: var(--c-alkali); }
        .cat-alkaline { background: rgba(255, 159, 67, 0.15); border-bottom: 3px solid var(--c-alkaline); color: var(--c-alkaline); }
        .cat-transition { background: rgba(254, 202, 87, 0.15); border-bottom: 3px solid var(--c-transition); color: var(--c-transition); }
        .cat-post-trans { background: rgba(250, 177, 160, 0.15); border-bottom: 3px solid var(--c-post-trans); color: var(--c-post-trans); }
        .cat-metalloid { background: rgba(0, 210, 211, 0.15); border-bottom: 3px solid var(--c-metalloid); color: var(--c-metalloid); }
        .cat-nonmetal { background: rgba(84, 160, 255, 0.15); border-bottom: 3px solid var(--c-nonmetal); color: var(--c-nonmetal); }
        .cat-halogen { background: rgba(95, 39, 205, 0.15); border-bottom: 3px solid var(--c-halogen); color: var(--c-halogen); }
        .cat-noble { background: rgba(200, 214, 229, 0.15); border-bottom: 3px solid var(--c-noble); color: var(--c-noble); }
        .cat-lanthanoid { background: rgba(255, 159, 243, 0.15); border-bottom: 3px solid var(--c-lanthanoid); color: var(--c-lanthanoid); }
        .cat-actinoid { background: rgba(156, 136, 255, 0.15); border-bottom: 3px solid var(--c-actinoid); color: var(--c-actinoid); }
        .cat-unknown { background: rgba(87, 101, 116, 0.15); border-bottom: 3px solid var(--c-unknown); color: var(--c-unknown); }

        /* 占位符样式 (57-71, 89-103) */
        .placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            color: #555;
            border: 1px dashed #444;
            border-radius: 4px;
        }

        /* --- 弹窗样式 --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--modal-bg);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .modal-overlay.active { display: flex; opacity: 1; }

        .modal-card {
            background: #222f3e;
            width: 90%; max-width: 600px;
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            overflow: hidden;
            border: 1px solid #34495e;
        }

        .modal-header {
            padding: 30px;
            display: flex;
            align-items: center;
            gap: 25px;
            background: rgba(0,0,0,0.2);
        }

        .modal-symbol-box {
            width: 80px; height: 80px;
            display: flex; justify-content: center; align-items: center;
            font-size: 40px; font-weight: bold;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            border: 2px solid currentColor;
        }

        .modal-info { flex: 1; }
        .modal-info h2 { margin: 0; font-size: 2em; color: #fff; }
        .modal-info p { margin: 5px 0 0; color: #a4b0be; font-size: 1.1em; }

        .modal-body { padding: 30px; }
        .data-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px; }
        .data-item label { display: block; color: #7f8c8d; font-size: 0.85em; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .data-item span { font-size: 1.1em; color: #ecf0f1; }

        .modal-desc { background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px; line-height: 1.6; color: #ced6e0; }
        
        .close-btn {
            position: absolute; top: 20px; right: 20px;
            background: none; border: none; color: #7f8c8d;
            font-size: 30px; cursor: pointer;
        }
        .close-btn:hover { color: #fff; }

        /* 图例栏 */
        .legend-bar {
            display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
            margin-top: 20px; max-width: 1000px;
        }
        .legend-item {
            font-size: 11px; padding: 4px 10px; border-radius: 15px;
            background: #222; border: 1px solid #444; cursor: pointer;
            display: flex; align-items: center; gap: 6px;
        }
        .legend-item:hover { background: #333; }
        .dot { width: 8px; height: 8px; border-radius: 50%; }

    </style>
</head>
<body>

    <h1>化学元素周期表</h1>
    <div class="subtitle">包含 118 种元素的完整互动图表</div>

    <div class="controls">
        <input type="text" id="searchInput" placeholder="查找元素 (如: 铁, Fe, 26)...">
        
        <select id="categoryFilter">
            <option value="all">全部分类</option>
            <option value="alkali">碱金属</option>
            <option value="alkaline">碱土金属</option>
            <option value="transition">过渡金属</option>
            <option value="post-trans">贫金属</option>
            <option value="metalloid">类金属</option>
            <option value="nonmetal">非金属</option>
            <option value="halogen">卤素</option>
            <option value="noble">稀有气体</option>
            <option value="lanthanoid">镧系元素</option>
            <option value="actinoid">锕系元素</option>
        </select>
    </div>

    <div class="table-container">
        <div class="periodic-table" id="tableGrid">
            <!-- 占位符：镧系和锕系在主表的位置 -->
            <div class="placeholder" style="grid-column: 3; grid-row: 6;">57-71</div>
            <div class="placeholder" style="grid-column: 3; grid-row: 7;">89-103</div>
        </div>
    </div>

    <div class="legend-bar" id="legendBar">
        <!-- JS生成图例 -->
    </div>

    <!-- 详情弹窗 -->
    <div class="modal-overlay" id="modal">
        <div class="modal-card" id="modalCard">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <div class="modal-header">
                <div class="modal-symbol-box" id="m-symbol">Fe</div>
                <div class="modal-info">
                    <h2 id="m-name">铁 (Iron)</h2>
                    <p id="m-cat">过渡金属</p>
                </div>
            </div>
            <div class="modal-body">
                <div class="data-grid">
                    <div class="data-item"><label>原子序数</label><span id="m-num">26</span></div>
                    <div class="data-item"><label>原子量</label><span id="m-mass">55.845</span></div>
                    <div class="data-item"><label>电子排布</label><span id="m-config">[Ar] 3d6 4s2</span></div>
                    <div class="data-item"><label>物理状态</label><span id="m-state">固体</span></div>
                </div>
                <div class="modal-desc" id="m-desc">
                    铁是地壳中含量第四丰富的元素，也是宇宙中第六丰富的元素。它是现代工业的基础。
                </div>
            </div>
        </div>
    </div>

<script>
    // 压缩的元素数据 (1-118)
    // 格式: [原子序数, 符号, 中文名, 英文名, 原子量, 分类, 状态, 电子排布(简), 简介]
    // 为了代码简洁，部分简介使用了通用模板
    const rawData = [
        [1, "H", "氢", "Hydrogen", "1.008", "nonmetal", "gas", "1s1", "宇宙中最丰富的元素，恒星的主要燃料。"],
        [2, "He", "氦", "Helium", "4.0026", "noble", "gas", "1s2", "第二轻的元素，用于气球和超导磁体冷却。"],
        [3, "Li", "锂", "Lithium", "6.94", "alkali", "solid", "[He] 2s1", "最轻的金属，广泛用于电池技术。"],
        [4, "Be", "铍", "Beryllium", "9.0122", "alkaline", "solid", "[He] 2s2", "轻而坚硬，用于航空航天和X射线窗口。"],
        [5, "B", "硼", "Boron", "10.81", "metalloid", "solid", "[He] 2s2 2p1", "用于耐热玻璃和植物生长。"],
        [6, "C", "碳", "Carbon", "12.011", "nonmetal", "solid", "[He] 2s2 2p2", "生命的基础，存在形式包括钻石和石墨。"],
        [7, "N", "氮", "Nitrogen", "14.007", "nonmetal", "gas", "[He] 2s2 2p3", "占地球大气的78%，是蛋白质的关键成分。"],
        [8, "O", "氧", "Oxygen", "15.999", "nonmetal", "gas", "[He] 2s2 2p4", "生命呼吸必需，地壳中含量最丰富的元素。"],
        [9, "F", "氟", "Fluorine", "18.998", "halogen", "gas", "[He] 2s2 2p5", "反应性最强的元素，用于牙膏和特氟龙。"],
        [10, "Ne", "氖", "Neon", "20.180", "noble", "gas", "[He] 2s2 2p6", "用于霓虹灯广告牌，发出红橙色光。"],
        [11, "Na", "钠", "Sodium", "22.990", "alkali", "solid", "[Ne] 3s1", "食盐的主要成分，维持人体体液平衡。"],
        [12, "Mg", "镁", "Magnesium", "24.305", "alkaline", "solid", "[Ne] 3s2", "燃烧发出白光，用于合金和叶绿素中心。"],
        [13, "Al", "铝", "Aluminium", "26.982", "post-trans", "solid", "[Ne] 3s2 3p1", "地壳中最丰富的金属，轻便且耐腐蚀。"],
        [14, "Si", "硅", "Silicon", "28.085", "metalloid", "solid", "[Ne] 3s2 3p2", "半导体工业的基础，存在于沙子和岩石中。"],
        [15, "P", "磷", "Phosphorus", "30.974", "nonmetal", "solid", "[Ne] 3s2 3p3", "存在于DNA和骨骼中，也用于火柴和肥料。"],
        [16, "S", "硫", "Sulfur", "32.06", "nonmetal", "solid", "[Ne] 3s2 3p4", "黄色晶体，用于制造硫酸和橡胶硫化。"],
        [17, "Cl", "氯", "Chlorine", "35.45", "halogen", "gas", "[Ne] 3s2 3p5", "用于消毒水和制造PVC塑料。"],
        [18, "Ar", "氩", "Argon", "39.948", "noble", "gas", "[Ne] 3s2 3p6", "灯泡中的填充气，焊接保护气。"],
        [19, "K", "钾", "Potassium", "39.098", "alkali", "solid", "[Ar] 4s1", "植物生长必需元素，神经传导关键。"],
        [20, "Ca", "钙", "Calcium", "40.078", "alkaline", "solid", "[Ar] 4s2", "骨骼和牙齿的主要成分，水泥原料。"],
        [21, "Sc", "钪", "Scandium", "44.956", "transition", "solid", "[Ar] 3d1 4s2", "用于航空铝合金和高强度灯。"],
        [22, "Ti", "钛", "Titanium", "47.867", "transition", "solid", "[Ar] 3d2 4s2", "强度高密度低，生物相容性好（植入物）。"],
        [23, "V", "钒", "Vanadium", "50.942", "transition", "solid", "[Ar] 3d3 4s2", "用于强化钢材，工具钢。"],
        [24, "Cr", "铬", "Chromium", "51.996", "transition", "solid", "[Ar] 3d5 4s1", "不锈钢的关键成分，提供光泽和防锈。"],
        [25, "Mn", "锰", "Manganese", "54.938", "transition", "solid", "[Ar] 3d5 4s2", "钢材脱氧剂，也是人体微量元素。"],
        [26, "Fe", "铁", "Iron", "55.845", "transition", "solid", "[Ar] 3d6 4s2", "应用最广泛的金属，血红蛋白的核心。"],
        [27, "Co", "钴", "Cobalt", "58.933", "transition", "solid", "[Ar] 3d7 4s2", "用于超级合金、磁体和蓝色颜料。"],
        [28, "Ni", "镍", "Nickel", "58.693", "transition", "solid", "[Ar] 3d8 4s2", "用于硬币、电池和不锈钢。"],
        [29, "Cu", "铜", "Copper", "63.546", "transition", "solid", "[Ar] 3d10 4s1", "优良的导电体，人类最早使用的金属之一。"],
        [30, "Zn", "锌", "Zinc", "65.38", "transition", "solid", "[Ar] 3d10 4s2", "用于镀锌防锈，黄铜的成分。"],
        [31, "Ga", "镓", "Gallium", "69.723", "post-trans", "solid", "[Ar] 3d10 4s2 4p1", "熔点极低（29.7°C），用于半导体。"],
        [32, "Ge", "锗", "Germanium", "72.630", "metalloid", "solid", "[Ar] 3d10 4s2 4p2", "早期晶体管材料，用于光纤。"],
        [33, "As", "砷", "Arsenic", "74.922", "metalloid", "solid", "[Ar] 3d10 4s2 4p3", "著名的毒物，但也用于半导体。"],
        [34, "Se", "硒", "Selenium", "78.971", "nonmetal", "solid", "[Ar] 3d10 4s2 4p4", "用于复印机感光鼓和去屑洗发水。"],
        [35, "Br", "溴", "Bromine", "79.904", "halogen", "liquid", "[Ar] 3d10 4s2 4p5", "常温下唯一的液态非金属，用于阻燃剂。"],
        [36, "Kr", "氪", "Krypton", "83.798", "noble", "gas", "[Ar] 3d10 4s2 4p6", "用于高强度闪光灯和激光。"],
        [37, "Rb", "铷", "Rubidium", "85.468", "alkali", "solid", "[Kr] 5s1", "用于原子钟和GPS系统。"],
        [38, "Sr", "锶", "Strontium", "87.62", "alkaline", "solid", "[Kr] 5s2", "用于红色烟花和夜光漆。"],
        [39, "Y", "钇", "Yttrium", "88.906", "transition", "solid", "[Kr] 4d1 5s2", "用于LED荧光粉和超导体。"],
        [40, "Zr", "锆", "Zirconium", "91.224", "transition", "solid", "[Kr] 4d2 5s2", "耐腐蚀，用于核反应堆包壳和假钻。"],
        [41, "Nb", "铌", "Niobium", "92.906", "transition", "solid", "[Kr] 4d4 5s1", "用于超导磁体和低过敏首饰。"],
        [42, "Mo", "钼", "Molybdenum", "95.95", "transition", "solid", "[Kr] 4d5 5s1", "高熔点，用于高温合金。"],
        [43, "Tc", "锝", "Technetium", "98", "transition", "solid", "[Kr] 4d5 5s2", "第一个人工合成元素，用于医学成像。"],
        [44, "Ru", "钌", "Ruthenium", "101.07", "transition", "solid", "[Kr] 4d7 5s1", "用于电子触点和催化剂。"],
        [45, "Rh", "铑", "Rhodium", "102.91", "transition", "solid", "[Kr] 4d8 5s1", "最昂贵的贵金属之一，用于反光镜。"],
        [46, "Pd", "钯", "Palladium", "106.42", "transition", "solid", "[Kr] 4d10", "用于汽车尾气催化转化器。"],
        [47, "Ag", "银", "Silver", "107.87", "transition", "solid", "[Kr] 4d10 5s1", "导电导热性最好的金属。"],
        [48, "Cd", "镉", "Cadmium", "112.41", "transition", "solid", "[Kr] 4d10 5s2", "有毒，曾用于镍镉电池。"],
        [49, "In", "铟", "Indium", "114.82", "post-trans", "solid", "[Kr] 4d10 5s2 5p1", "用于触摸屏的透明导电涂层(ITO)。"],
        [50, "Sn", "锡", "Tin", "118.71", "post-trans", "solid", "[Kr] 4d10 5s2 5p2", "用于焊接和食品罐头涂层。"],
        [51, "Sb", "锑", "Antimony", "121.76", "metalloid", "solid", "[Kr] 4d10 5s2 5p3", "用于阻燃剂和铅酸电池。"],
        [52, "Te", "碲", "Tellurium", "127.60", "metalloid", "solid", "[Kr] 4d10 5s2 5p4", "用于太阳能电池板和合金。"],
        [53, "I", "碘", "Iodine", "126.90", "halogen", "solid", "[Kr] 4d10 5s2 5p5", "人体甲状腺必需，用于消毒。"],
        [54, "Xe", "氙", "Xenon", "131.29", "noble", "gas", "[Kr] 4d10 5s2 5p6", "用于离子推进器和强光灯。"],
        [55, "Cs", "铯", "Cesium", "132.91", "alkali", "solid", "[Xe] 6s1", "定义“秒”的标准，最活泼的金属之一。"],
        [56, "Ba", "钡", "Barium", "137.33", "alkaline", "solid", "[Xe] 6s2", "用于医学造影（钡餐）和绿色烟花。"],
        // 镧系 (57-71)
        [57, "La", "镧", "Lanthanum", "138.91", "lanthanoid", "solid", "[Xe] 5d1 6s2", "混合动力汽车电池材料。"],
        [58, "Ce", "铈", "Cerium", "140.12", "lanthanoid", "solid", "[Xe] 4f1 5d1 6s2", "打火石的主要成分。"],
        [59, "Pr", "镨", "Praseodymium", "140.91", "lanthanoid", "solid", "[Xe] 4f3 6s2", "用于护目镜和黄色玻璃。"],
        [60, "Nd", "钕", "Neodymium", "144.24", "lanthanoid", "solid", "[Xe] 4f4 6s2", "制造世界上最强的永磁体。"],
        [61, "Pm", "钷", "Promethium", "145", "lanthanoid", "solid", "[Xe] 4f5 6s2", "放射性，用于核电池。"],
        [62, "Sm", "钐", "Samarium", "150.36", "lanthanoid", "solid", "[Xe] 4f6 6s2", "用于磁体和吉他拾音器。"],
        [63, "Eu", "铕", "Europium", "151.96", "lanthanoid", "solid", "[Xe] 4f7 6s2", "欧元纸币的防伪荧光材料。"],
        [64, "Gd", "钆", "Gadolinium", "157.25", "lanthanoid", "solid", "[Xe] 4f7 5d1 6s2", "MRI造影剂。"],
        [65, "Tb", "铽", "Terbium", "158.93", "lanthanoid", "solid", "[Xe] 4f9 6s2", "用于绿色荧光粉和声纳。"],
        [66, "Dy", "镝", "Dysprosium", "162.50", "lanthanoid", "solid", "[Xe] 4f10 6s2", "用于硬盘驱动器和激光。"],
        [67, "Ho", "钬", "Holmium", "164.93", "lanthanoid", "solid", "[Xe] 4f11 6s2", "具有最高的磁矩，用于激光外科。"],
        [68, "Er", "铒", "Erbium", "167.26", "lanthanoid", "solid", "[Xe] 4f12 6s2", "用于光纤放大器和粉色玻璃。"],
        [69, "Tm", "铥", "Thulium", "168.93", "lanthanoid", "solid", "[Xe] 4f13 6s2", "最稀有的稀土元素之一，用于X射线机。"],
        [70, "Yb", "镱", "Ytterbium", "173.05", "lanthanoid", "solid", "[Xe] 4f14 6s2", "用于不锈钢强化和原子钟。"],
        [71, "Lu", "镥", "Lutetium", "174.97", "lanthanoid", "solid", "[Xe] 4f14 5d1 6s2", "用于PET扫描探测器。"],
        // 接回主表
        [72, "Hf", "铪", "Hafnium", "178.49", "transition", "solid", "[Xe] 4f14 5d2 6s2", "用于核潜艇控制棒和芯片绝缘体。"],
        [73, "Ta", "钽", "Tantalum", "180.95", "transition", "solid", "[Xe] 4f14 5d3 6s2", "用于手机电容器，极耐腐蚀。"],
        [74, "W", "钨", "Tungsten", "183.84", "transition", "solid", "[Xe] 4f14 5d4 6s2", "熔点最高的金属，用于灯丝。"],
        [75, "Re", "铼", "Rhenium", "186.21", "transition", "solid", "[Xe] 4f14 5d5 6s2", "用于喷气发动机的高温合金。"],
        [76, "Os", "锇", "Osmium", "190.23", "transition", "solid", "[Xe] 4f14 5d6 6s2", "密度最大的自然元素。"],
        [77, "Ir", "铱", "Iridium", "192.22", "transition", "solid", "[Xe] 4f14 5d7 6s2", "最耐腐蚀的金属，用于火花塞。"],
        [78, "Pt", "铂", "Platinum", "195.08", "transition", "solid", "[Xe] 4f14 5d9 6s1", "用于首饰、催化剂和抗癌药。"],
        [79, "Au", "金", "Gold", "196.97", "transition", "solid", "[Xe] 4f14 5d10 6s1", "延展性最好的金属，货币与装饰。"],
        [80, "Hg", "汞", "Mercury", "200.59", "transition", "liquid", "[Xe] 4f14 5d10 6s2", "常温下唯一的液态金属（水银）。"],
        [81, "Tl", "铊", "Thallium", "204.38", "post-trans", "solid", "[Xe] 4f14 5d10 6s2 6p1", "剧毒，曾用于鼠药。"],
        [82, "Pb", "铅", "Lead", "207.2", "post-trans", "solid", "[Xe] 4f14 5d10 6s2 6p2", "用于电池、辐射屏蔽和子弹。"],
        [83, "Bi", "铋", "Bismuth", "208.98", "post-trans", "solid", "[Xe] 4f14 5d10 6s2 6p3", "用于胃药和化妆品，彩虹色晶体。"],
        [84, "Po", "钋", "Polonium", "209", "metalloid", "solid", "[Xe] 4f14 5d10 6s2 6p4", "居里夫人发现的强放射性元素。"],
        [85, "At", "砹", "Astatine", "210", "halogen", "solid", "[Xe] 4f14 5d10 6s2 6p5", "地壳中最稀有的自然元素之一。"],
        [86, "Rn", "氡", "Radon", "222", "noble", "gas", "[Xe] 4f14 5d10 6s2 6p6", "放射性气体，由于地下室积聚而危害健康。"],
        [87, "Fr", "钫", "Francium", "223", "alkali", "solid", "[Rn] 7s1", "极不稳定的放射性碱金属。"],
        [88, "Ra", "镭", "Radium", "226", "alkaline", "solid", "[Rn] 7s2", "曾用于夜光表盘，强放射性。"],
        // 锕系 (89-103)
        [89, "Ac", "锕", "Actinium", "227", "actinoid", "solid", "[Rn] 6d1 7s2", "发蓝光的强放射性元素。"],
        [90, "Th", "钍", "Thorium", "232.04", "actinoid", "solid", "[Rn] 6d2 7s2", "潜在的核燃料，用于煤气灯纱罩。"],
        [91, "Pa", "镤", "Protactinium", "231.04", "actinoid", "solid", "[Rn] 5f2 6d1 7s2", "稀有且具有高放射性。"],
        [92, "U", "铀", "Uranium", "238.03", "actinoid", "solid", "[Rn] 5f3 6d1 7s2", "核电站和核武器的主要燃料。"],
        [93, "Np", "镎", "Neptunium", "237", "actinoid", "solid", "[Rn] 5f4 6d1 7s2", "用于中子探测设备。"],
        [94, "Pu", "钚", "Plutonium", "244", "actinoid", "solid", "[Rn] 5f6 7s2", "用于核武器和太空探测器电池。"],
        [95, "Am", "镅", "Americium", "243", "actinoid", "solid", "[Rn] 5f7 7s2", "家用烟雾探测器中含有微量镅。"],
        [96, "Cm", "锔", "Curium", "247", "actinoid", "solid", "[Rn] 5f7 6d1 7s2", "用于火星车X射线光谱仪。"],
        [97, "Bk", "锫", "Berkelium", "247", "actinoid", "solid", "[Rn] 5f9 7s2", "人工合成，用于合成更重元素。"],
        [98, "Cf", "锎", "Californium", "251", "actinoid", "solid", "[Rn] 5f10 7s2", "极昂贵，用于中子源启动反应堆。"],
        [99, "Es", "锿", "Einsteinium", "252", "actinoid", "solid", "[Rn] 5f11 7s2", "以爱因斯坦命名，氢弹爆炸产物中发现。"],
        [100, "Fm", "镄", "Fermium", "257", "actinoid", "solid", "[Rn] 5f12 7s2", "以费米命名，人工合成重元素。"],
        [101, "Md", "钔", "Mendelevium", "258", "actinoid", "solid", "[Rn] 5f13 7s2", "以门捷列夫命名，纪念周期表之父。"],
        [102, "No", "锘", "Nobelium", "259", "actinoid", "solid", "[Rn] 5f14 7s2", "以诺贝尔命名。"],
        [103, "Lr", "铹", "Lawrencium", "266", "actinoid", "solid", "[Rn] 5f14 7s2 7p1", "以回旋加速器发明者劳伦斯命名。"],
        // 超重元素 (104-118)
        [104, "Rf", "鑪", "Rutherfordium", "267", "transition", "unknown", "[Rn] 5f14 6d2 7s2", "人工合成放射性元素。"],
        [105, "Db", "𨧀", "Dubnium", "268", "transition", "unknown", "[Rn] 5f14 6d3 7s2", "人工合成放射性元素。"],
        [106, "Sg", "𨭎", "Seaborgium", "269", "transition", "unknown", "[Rn] 5f14 6d4 7s2", "唯一以在世科学家命名的元素（当时）。"],
        [107, "Bh", "𨨏", "Bohrium", "270", "transition", "unknown", "[Rn] 5f14 6d5 7s2", "人工合成放射性元素。"],
        [108, "Hs", "𨭆", "Hassium", "277", "transition", "unknown", "[Rn] 5f14 6d6 7s2", "人工合成放射性元素。"],
        [109, "Mt", "䥑", "Meitnerium", "278", "unknown", "unknown", "[Rn] 5f14 6d7 7s2", "人工合成放射性元素。"],
        [110, "Ds", "鐽", "Darmstadtium", "281", "unknown", "unknown", "[Rn] 5f14 6d8 7s2", "人工合成放射性元素。"],
        [111, "Rg", "錀", "Roentgenium", "282", "unknown", "unknown", "[Rn] 5f14 6d9 7s2", "人工合成放射性元素。"],
        [112, "Cn", "鎶", "Copernicium", "285", "transition", "unknown", "[Rn] 5f14 6d10 7s2", "人工合成放射性元素。"],
        [113, "Nh", "鉨", "Nihonium", "286", "unknown", "unknown", "[Rn] 5f14 6d10 7s2 7p1", "首个由亚洲科学家发现的元素。"],
        [114, "Fl", "鈇", "Flerovium", "289", "post-trans", "unknown", "[Rn] 5f14 6d10 7s2 7p2", "人工合成放射性元素。"],
        [115, "Mc", "镆", "Moscovium", "290", "unknown", "unknown", "[Rn] 5f14 6d10 7s2 7p3", "人工合成放射性元素。"],
        [116, "Lv", "鉝", "Livermorium", "293", "post-trans", "unknown", "[Rn] 5f14 6d10 7s2 7p4", "人工合成放射性元素。"],
        [117, "Ts", "鿬", "Tennessine", "294", "halogen", "unknown", "[Rn] 5f14 6d10 7s2 7p5", "人工合成放射性元素。"],
        [118, "Og", "鿫", "Oganesson", "294", "noble", "unknown", "[Rn] 5f14 6d10 7s2 7p6", "目前已知原子序数最大的元素。"]
    ];

    // 将数组转换为对象数组，方便处理
    const elements = rawData.map(d => ({
        number: d[0], symbol: d[1], name: d[2], nameEn: d[3],
        mass: d[4], category: d[5], state: d[6], config: d[7], desc: d[8]
    }));

    // 颜色标签映射
    const categories = {
        'alkali': '碱金属',
        'alkaline': '碱土金属',
        'transition': '过渡金属',
        'post-trans': '贫金属',
        'metalloid': '类金属',
        'nonmetal': '非金属',
        'halogen': '卤素',
        'noble': '稀有气体',
        'lanthanoid': '镧系元素',
        'actinoid': '锕系元素',
        'unknown': '性质未知'
    };

    const tableGrid = document.getElementById('tableGrid');
    const modal = document.getElementById('modal');

    // 计算元素在 Grid 中的位置
    function getGridPosition(n) {
        // 特殊处理镧系 (57-71) -> 移到底部第8行 (视觉上是第9行，因为有间距)
        if (n >= 57 && n <= 71) return { row: 9, col: n - 57 + 4 }; // 从第4列开始排
        
        // 特殊处理锕系 (89-103) -> 移到底部第9行 (视觉上是第10行)
        if (n >= 89 && n <= 103) return { row: 10, col: n - 89 + 4 };

        // 标准周期表逻辑
        if (n === 1) return { row: 1, col: 1 };
        if (n === 2) return { row: 1, col: 18 };
        
        if (n >= 3 && n <= 4) return { row: 2, col: n - 2 };
        if (n >= 5 && n <= 10) return { row: 2, col: n + 8 };
        
        if (n >= 11 && n <= 12) return { row: 3, col: n - 10 };
        if (n >= 13 && n <= 18) return { row: 3, col: n };
        
        if (n >= 19 && n <= 36) return { row: 4, col: n - 18 };
        if (n >= 37 && n <= 54) return { row: 5, col: n - 36 };
        
        if (n >= 55 && n <= 56) return { row: 6, col: n - 54 };
        // 57-71 跳过
        if (n >= 72 && n <= 86) return { row: 6, col: n - 72 + 4 };
        
        if (n >= 87 && n <= 88) return { row: 7, col: n - 86 };
        // 89-103 跳过
        if (n >= 104 && n <= 118) return { row: 7, col: n - 104 + 4 };

        return { row: 1, col: 1 };
    }

    // 渲染图表
    function renderTable() {
        elements.forEach(elm => {
            const pos = getGridPosition(elm.number);
            const div = document.createElement('div');
            div.className = `element cat-${elm.category}`;
            div.style.gridColumn = pos.col;
            div.style.gridRow = pos.row;
            
            // 数据绑定
            div.dataset.search = `${elm.name}${elm.nameEn}${elm.symbol}${elm.number}`.toLowerCase();
            div.dataset.cat = elm.category;
            div.dataset.state = elm.state;

            div.innerHTML = `
                <span class="at-num">${elm.number}</span>
                <span class="symbol">${elm.symbol}</span>
                <span class="name">${elm.name}</span>
            `;

            div.onclick = () => showDetails(elm);
            tableGrid.appendChild(div);
        });
    }

    // 渲染图例
    function renderLegend() {
        const bar = document.getElementById('legendBar');
        for (const [key, label] of Object.entries(categories)) {
            const item = document.createElement('div');
            item.className = 'legend-item';
            item.innerHTML = `<div class="dot" style="background:var(--c-${key})"></div>${label}`;
            item.onclick = () => {
                document.getElementById('categoryFilter').value = key;
                filterElements();
            };
            bar.appendChild(item);
        }
    }

    // 弹窗逻辑
    function showDetails(elm) {
        const colorVar = `var(--c-${elm.category})`;
        
        // 设置颜色
        const symbolBox = document.getElementById('m-symbol');
        symbolBox.style.color = colorVar;
        symbolBox.style.borderColor = colorVar;
        symbolBox.style.background = `rgba(255,255,255,0.05)`;
        symbolBox.textContent = elm.symbol;

        document.getElementById('m-name').textContent = `${elm.name} (${elm.nameEn})`;
        document.getElementById('m-name').style.color = colorVar;
        
        document.getElementById('m-cat').textContent = categories[elm.category];
        document.getElementById('m-num').textContent = elm.number;
        document.getElementById('m-mass').textContent = elm.mass;
        document.getElementById('m-config').textContent = elm.config;
        
        const stateMap = { 'solid': '固体', 'liquid': '液体', 'gas': '气体', 'unknown': '未知' };
        document.getElementById('m-state').textContent = stateMap[elm.state];
        
        document.getElementById('m-desc').textContent = elm.desc;

        modal.classList.add('active');
    }

    function closeModal() {
        modal.classList.remove('active');
    }

    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

    // 筛选逻辑
    function filterElements() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        const cat = document.getElementById('categoryFilter').value;
        
        document.querySelectorAll('.element').forEach(el => {
            const matchSearch = el.dataset.search.includes(term);
            const matchCat = cat === 'all' || el.dataset.cat === cat;
            
            if (matchSearch && matchCat) {
                el.classList.remove('dimmed');
            } else {
                el.classList.add('dimmed');
            }
        });
    }

    document.getElementById('searchInput').addEventListener('input', filterElements);
    document.getElementById('categoryFilter').addEventListener('change', filterElements);

    // 初始化
    renderTable();
    renderLegend();

</script>
</body>
</html>